(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b9fd206"],{"07ac":function(t,e,o){var i=o("23e7"),n=o("6f53").values;i({target:"Object",stat:!0},{values:function(t){return n(t)}})},"57da":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"box"},[o("h1",{staticClass:"title"},[t._v("Gyermekkarácsony 2020")]),o("h2",{staticClass:"subtitle"},[t._v("Ajándékok")]),o("h3",[t._v("Üdvözlünk: "),o("strong",[t._v(t._s(t.name))])]),o("h3",[t._v("A te időpontod: "+t._s(t.getTimestamp())+" ")]),o("h3",[t._v("A csomagok átvehetők: 2336 Dunavarsány Eötvös utca 70.")]),o("b-table",{attrs:{data:t.data,striped:"",hoverable:"",loading:t.isLoading,"mobile-cards":""}},[o("b-table-column",{attrs:{field:"childName",centered:"",label:"Gyermek neve"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isEditRow(e.row)?o("b-input",{staticClass:"input-text-center",model:{value:t.actionRow.childName,callback:function(e){t.$set(t.actionRow,"childName",e)},expression:"actionRow.childName"}}):o("span",[t._v(t._s(e.row.childName))])]}}])}),o("b-table-column",{attrs:{field:"ageGroup",centered:"",label:"Korosztály"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isEditRow(e.row)?o("b-field",[o("b-select",{attrs:{placeholder:"Válasszon",requried:""},model:{value:t.actionRow.ageGroup,callback:function(e){t.$set(t.actionRow,"ageGroup",e)},expression:"actionRow.ageGroup"}},t._l(Object.keys(t.stock),(function(e){return o("option",{key:e,attrs:{disabled:t.isOutOfStock(e)},domProps:{value:e}},[t._v(" "+t._s(t.getOptionString(e))+" ")])})),0)],1):o("span",[t._v(" "+t._s(t.ageGroupToString(e.row.ageGroup))+" ")])]}}])}),o("b-table-column",{attrs:{field:"date",label:"Rögzítés dátuma",centered:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(new Date(e.row.bookingTime).toLocaleString())+" ")]}}])}),o("b-table-column",{staticClass:"mybutton",attrs:{field:"id"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isActionMode(e.row)?t.isActionMode(e.row)?o("b-button",{attrs:{disabled:t.isDisabled,"icon-right":"check"},on:{click:t.action}}):t._e():o("b-button",{attrs:{"icon-right":"edit"},on:{click:function(o){return t.makeActionRow(e.row,"edit")}}}),t.isActionMode(e.row)?t.isActionMode(e.row)?o("b-button",{attrs:{"icon-right":"times"},on:{click:t.exitAction}}):t._e():o("b-button",{attrs:{"icon-right":"trash"},on:{click:function(o){return t.makeActionRow(e.row,"remove")}}})]}}])}),o("template",{slot:"footer"},[o("div",{staticClass:"level"},[o("div",{staticClass:"level-left"},[o("div",{staticClass:"level-item"},[o("b-button",{attrs:{"icon-right":"plus"},on:{click:function(e){t.showModal=!0}}},[t._v("Hozzáadás")])],1)]),o("div",{staticClass:"level-left"},[o("div",{staticClass:"level-item"},[o("b-button",{staticClass:"p-3",on:{click:t.logout}},[t._v("Kijelentkezés")])],1)])])])],2),o("b-modal",{attrs:{"destroy-on-hide":!1},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[[o("div",{staticClass:"box"},[o("b-field",{attrs:{label:"Gyermek neve"}},[o("b-input",{staticClass:"input-text-center",attrs:{required:""},model:{value:t.childName,callback:function(e){t.childName=e},expression:"childName"}})],1),o("b-field",{attrs:{label:"Korcsoport"}},[o("b-select",{attrs:{placeholder:"Válasszon",requried:""},model:{value:t.ageGroup,callback:function(e){t.ageGroup=e},expression:"ageGroup"}},t._l(Object.keys(t.stock),(function(e){return o("option",{key:e,attrs:{disabled:t.isOutOfStock(e)},domProps:{value:e}},[t._v(" "+t._s(t.getOptionString(e))+" ")])})),0)],1),o("b-button",{attrs:{"icon-right":"save",disabled:t.notSave},on:{click:t.book}},[t._v("Mentés")])],1)]],2)],1)},n=[],s=(o("99af"),o("c975"),o("b0c0"),o("b64b"),o("07ac"),{name:"Home",data:function(){return{data:[],stock:{B3:0,B6:0,B8:0,B11:0,G3:0,G6:0,G8:0,G11:0},name:"",actionMode:!1,actionType:"",childName:"",ageGroup:"",showModal:!1,isLoading:!1,actionRow:{childName:"",ageGroup:""},prevObject:{},param:{type:""}}},mounted:function(){this.name=window.sessionStorage.getItem("username"),this.refresh()},computed:{isDisabled:function(){return 0===this.actionRow.childName.length&&"edit"===this.actionType},notSave:function(){return 0===this.ageGroup.length||(0===this.childName.length||this.isOutOfStock(this.ageGroup))}},methods:{getTimestamp:function(){var t=window.sessionStorage.getItem("timestamp");if("undefined"!==t){var e=new Date(t);return e.setHours(e.getHours()+1),e.toLocaleString()}return"Nincs"},updateStore:function(){var t=this;this.$store.dispatch("presentApi",{type:"collect"}).then((function(e){t.stock=e}))},isEditRow:function(t){return this.isActionMode(t)&&"edit"===this.actionType},isActionMode:function(t){return this.actionRow===t&&this.actionMode},makeActionRow:function(t,e){switch(this.actionMode=!0,this.actionType=e,this.actionRow=t,e){case"edit":this.prevObject={childName:this.actionRow.childName,ageGroup:this.actionRow.ageGroup};break;case"remove":break}},exitAction:function(){switch(this.actionType){case"edit":this.actionRow.childName=this.prevObject.childName,this.actionRow.ageGroup=this.prevObject.ageGroup;break;case"remove":break}console.log(this.actionRow),this.actionMode=!1},action:function(){switch(this.actionType){case"edit":this.update();break;case"remove":this.remove();break}this.actionMode=!1},update:function(){var t=this,e={type:"update",data:this.actionRow};this.$store.dispatch("presentApi",e).then((function(e){t.data=e,t.refresh()}))},remove:function(){var t=this;console.log("remove");var e={type:"remove",data:this.actionRow};this.$store.dispatch("presentApi",e).then((function(){return t.refresh()}))},book:function(){var t=this,e=[];e.push({childName:this.childName,ageGroup:this.ageGroup}),this.$store.dispatch("presentApi",{type:"book",data:{secretKey:window.sessionStorage.getItem("key"),presents:e}}).then((function(){t.showModal=!1,t.refresh()}))},isOutOfStock:function(t){var e=Object.values(this.stock)[Object.keys(this.stock).indexOf(t)];return 0===e},getOptionString:function(t){var e=this.ageGroupToString(t),o=Object.values(this.stock)[Object.keys(this.stock).indexOf(t)];return 0===o?o="elfogyott":o+=" db van hátra",e.concat(" (").concat(o).concat(")")},refresh:function(){var t=this,e={type:"find",key:window.sessionStorage.getItem("key")};this.$store.dispatch("presentApi",e).then((function(e){t.data=e,t.updateStore()}))},logout:function(){window.sessionStorage.clear(),this.$store.commit("setLoggedIn",!1),this.$store.commit("setAdmin",""),this.$store.commit("setUsername",""),this.$router.push("/login")},ageGroupToString:function(t){switch(t){case"B3":return"3-5 éves fiú";case"G3":return"3-5 éves lány";case"B6":return"6-7 éves fiú";case"G6":return"6-7 éves lány";case"B8":return"8-10 éves fiú";case"G8":return"8-10 éves lány";case"B11":return"11-12 éves fiú";case"G11":return"11-12 éves lány"}}}}),a=s,r=(o("8b71"),o("2877")),c=Object(r["a"])(a,i,n,!1,null,null,null);e["default"]=c.exports},"6f53":function(t,e,o){var i=o("83ab"),n=o("df75"),s=o("fc6a"),a=o("d1e7").f,r=function(t){return function(e){var o,r=s(e),c=n(r),u=c.length,l=0,d=[];while(u>l)o=c[l++],i&&!a.call(r,o)||d.push(t?[o,r[o]]:r[o]);return d}};t.exports={entries:r(!0),values:r(!1)}},"88d7":function(t,e,o){},"8b71":function(t,e,o){"use strict";o("88d7")},"99af":function(t,e,o){"use strict";var i=o("23e7"),n=o("d039"),s=o("e8b5"),a=o("861d"),r=o("7b0b"),c=o("50c4"),u=o("8418"),l=o("65f0"),d=o("1dde"),h=o("b622"),f=o("2d00"),p=h("isConcatSpreadable"),b=9007199254740991,v="Maximum allowed index exceeded",m=f>=51||!n((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),g=d("concat"),w=function(t){if(!a(t))return!1;var e=t[p];return void 0!==e?!!e:s(t)},k=!m||!g;i({target:"Array",proto:!0,forced:k},{concat:function(t){var e,o,i,n,s,a=r(this),d=l(a,0),h=0;for(e=-1,i=arguments.length;e<i;e++)if(s=-1===e?a:arguments[e],w(s)){if(n=c(s.length),h+n>b)throw TypeError(v);for(o=0;o<n;o++,h++)o in s&&u(d,h,s[o])}else{if(h>=b)throw TypeError(v);u(d,h++,s)}return d.length=h,d}})},a640:function(t,e,o){"use strict";var i=o("d039");t.exports=function(t,e){var o=[][t];return!!o&&i((function(){o.call(null,e||function(){throw 1},1)}))}},b64b:function(t,e,o){var i=o("23e7"),n=o("7b0b"),s=o("df75"),a=o("d039"),r=a((function(){s(1)}));i({target:"Object",stat:!0,forced:r},{keys:function(t){return s(n(t))}})},c975:function(t,e,o){"use strict";var i=o("23e7"),n=o("4d64").indexOf,s=o("a640"),a=o("ae40"),r=[].indexOf,c=!!r&&1/[1].indexOf(1,-0)<0,u=s("indexOf"),l=a("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:c||!u||!l},{indexOf:function(t){return c?r.apply(this,arguments)||0:n(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-5b9fd206.96a08597.js.map